"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
const utils_1 = require("./utils");
const devServer_1 = __importDefault(require("@wfh/webpack-common/dist/devServer"));
const plink_1 = require("@wfh/plink");
const log = plink_1.logger.getLogger('@wfh/cra-scripts.webpack.devserver.config');
const origDevServerConfig = require('react-scripts/config/webpackDevServer.config');
module.exports = function (proxy, allowedHost) {
    const devServerCfg = origDevServerConfig.apply(this, arguments);
    devServerCfg.stats = 'normal';
    devServerCfg.quiet = false;
    devServer_1.default({ devServer: devServerCfg });
    if (devServerCfg.watchOptions && devServerCfg.watchOptions.ignored) {
        delete devServerCfg.watchOptions.ignored;
    }
    log.info('Dev server configure:', utils_1.printConfig(devServerCfg));
    return devServerCfg;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2VicGFjay5kZXZzZXJ2ZXIuY29uZmlnLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsid2VicGFjay5kZXZzZXJ2ZXIuY29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFDQSxtQ0FBb0M7QUFDcEMsbUZBQWlFO0FBQ2pFLHNDQUFrQztBQUNsQyxNQUFNLEdBQUcsR0FBRyxjQUFNLENBQUMsU0FBUyxDQUFDLDJDQUEyQyxDQUFDLENBQUM7QUFFMUUsTUFBTSxtQkFBbUIsR0FBRyxPQUFPLENBQUMsOENBQThDLENBQUMsQ0FBQztBQUVwRixpQkFBUyxVQUFTLEtBQWEsRUFBRSxXQUFtQjtJQUNsRCxNQUFNLFlBQVksR0FBNEMsbUJBQW1CLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsQ0FBQztJQUN6RyxZQUFZLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQztJQUM5QixZQUFZLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztJQUMzQixtQkFBZSxDQUFDLEVBQUMsU0FBUyxFQUFFLFlBQVksRUFBQyxDQUFDLENBQUM7SUFDM0MsSUFBSSxZQUFZLENBQUMsWUFBWSxJQUFJLFlBQVksQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFO1FBQ2xFLE9BQU8sWUFBWSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUM7S0FDMUM7SUFFRCxHQUFHLENBQUMsSUFBSSxDQUFDLHVCQUF1QixFQUFFLG1CQUFXLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztJQUM3RCxPQUFPLFlBQWEsQ0FBQztBQUN2QixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbmZpZ3VyYXRpb259IGZyb20gJ3dlYnBhY2snO1xuaW1wb3J0IHtwcmludENvbmZpZ30gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgY2hhbmdlRGV2U2VydmVyIGZyb20gJ0B3Zmgvd2VicGFjay1jb21tb24vZGlzdC9kZXZTZXJ2ZXInO1xuaW1wb3J0IHtsb2dnZXJ9IGZyb20gJ0B3ZmgvcGxpbmsnO1xuY29uc3QgbG9nID0gbG9nZ2VyLmdldExvZ2dlcignQHdmaC9jcmEtc2NyaXB0cy53ZWJwYWNrLmRldnNlcnZlci5jb25maWcnKTtcblxuY29uc3Qgb3JpZ0RldlNlcnZlckNvbmZpZyA9IHJlcXVpcmUoJ3JlYWN0LXNjcmlwdHMvY29uZmlnL3dlYnBhY2tEZXZTZXJ2ZXIuY29uZmlnJyk7XG5cbmV4cG9ydCA9IGZ1bmN0aW9uKHByb3h5OiBzdHJpbmcsIGFsbG93ZWRIb3N0OiBzdHJpbmcpIHtcbiAgY29uc3QgZGV2U2VydmVyQ2ZnOiBOb25OdWxsYWJsZTxDb25maWd1cmF0aW9uWydkZXZTZXJ2ZXInXT4gPSBvcmlnRGV2U2VydmVyQ29uZmlnLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIGRldlNlcnZlckNmZy5zdGF0cyA9ICdub3JtYWwnO1xuICBkZXZTZXJ2ZXJDZmcucXVpZXQgPSBmYWxzZTtcbiAgY2hhbmdlRGV2U2VydmVyKHtkZXZTZXJ2ZXI6IGRldlNlcnZlckNmZ30pO1xuICBpZiAoZGV2U2VydmVyQ2ZnLndhdGNoT3B0aW9ucyAmJiBkZXZTZXJ2ZXJDZmcud2F0Y2hPcHRpb25zLmlnbm9yZWQpIHtcbiAgICBkZWxldGUgZGV2U2VydmVyQ2ZnLndhdGNoT3B0aW9ucy5pZ25vcmVkO1xuICB9XG5cbiAgbG9nLmluZm8oJ0RldiBzZXJ2ZXIgY29uZmlndXJlOicsIHByaW50Q29uZmlnKGRldlNlcnZlckNmZykpO1xuICByZXR1cm4gZGV2U2VydmVyQ2ZnITtcbn07XG4iXX0=