"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const utils_1 = require("./utils");
const build_target_helper_1 = require("./build-target-helper");
const path_1 = tslib_1.__importDefault(require("path"));
const paths = require('react-scripts/config/paths');
function factory() {
    let changedPaths;
    return function () {
        if (changedPaths == null) {
            changedPaths = paths;
            const cmdOption = utils_1.getCmdOptions();
            // console.log('[debug] ', cmdOption);
            if (cmdOption.buildType === 'lib') {
                const { dir } = build_target_helper_1.findPackage(cmdOption.buildTarget);
                changedPaths.appBuild = path_1.default.resolve(dir, 'build');
                changedPaths.appIndexJs = path_1.default.resolve(dir, 'public_api.ts');
                // tslint:disable-next-line: no-console
                console.log('[cra-scripts-paths] changed react-scripts paths:\n', changedPaths);
            }
        }
        return changedPaths;
    };
}
exports.default = factory;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9AYmsvY3JhLXNjcmlwdHMvdHMvY3JhLXNjcmlwdHMtcGF0aHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsbUNBQXNDO0FBQ3RDLCtEQUFrRDtBQUNsRCx3REFBd0I7QUFDeEIsTUFBTSxLQUFLLEdBQW9CLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO0FBcUJyRSxTQUF3QixPQUFPO0lBQzdCLElBQUksWUFBeUMsQ0FBQztJQUM5QyxPQUFPO1FBQ0wsSUFBSSxZQUFZLElBQUksSUFBSSxFQUFFO1lBQ3hCLFlBQVksR0FBRyxLQUFLLENBQUM7WUFDckIsTUFBTSxTQUFTLEdBQUcscUJBQWEsRUFBRSxDQUFDO1lBQ2xDLHNDQUFzQztZQUN0QyxJQUFJLFNBQVMsQ0FBQyxTQUFTLEtBQUssS0FBSyxFQUFFO2dCQUNqQyxNQUFNLEVBQUMsR0FBRyxFQUFDLEdBQUcsaUNBQVcsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQ2pELFlBQVksQ0FBQyxRQUFRLEdBQUcsY0FBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQ25ELFlBQVksQ0FBQyxVQUFVLEdBQUcsY0FBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsZUFBZSxDQUFDLENBQUM7Z0JBQzdELHVDQUF1QztnQkFDdkMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxvREFBb0QsRUFBRSxZQUFZLENBQUMsQ0FBQzthQUNqRjtTQUNGO1FBQ0QsT0FBTyxZQUFZLENBQUM7SUFDdEIsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQWpCRCwwQkFpQkMiLCJmaWxlIjoibm9kZV9tb2R1bGVzL0Biay9jcmEtc2NyaXB0cy9kaXN0L2NyYS1zY3JpcHRzLXBhdGhzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtnZXRDbWRPcHRpb25zfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7ZmluZFBhY2thZ2V9IGZyb20gJy4vYnVpbGQtdGFyZ2V0LWhlbHBlcic7XG5pbXBvcnQgUGF0aCBmcm9tICdwYXRoJztcbmNvbnN0IHBhdGhzOiBDcmFTY3JpcHRzUGF0aHMgPSByZXF1aXJlKCdyZWFjdC1zY3JpcHRzL2NvbmZpZy9wYXRocycpO1xuXG5leHBvcnQgaW50ZXJmYWNlIENyYVNjcmlwdHNQYXRocyB7XG4gIGRvdGVudjogc3RyaW5nOyAvLyByZXNvbHZlQXBwKCcuZW52JyksXG4gIGFwcFBhdGg6IHN0cmluZzsgLy8gcmVzb2x2ZUFwcCgnLicpLFxuICBhcHBCdWlsZDogc3RyaW5nOyAvLyByZXNvbHZlQXBwKCdidWlsZCcpLFxuICBhcHBQdWJsaWM6IHN0cmluZzsgLy8gcmVzb2x2ZUFwcCgncHVibGljJyksXG4gIGFwcEh0bWw6IHN0cmluZzsgLy8gcmVzb2x2ZUFwcCgncHVibGljL2luZGV4Lmh0bWwnKSxcbiAgYXBwSW5kZXhKczogc3RyaW5nOyAvLyByZXNvbHZlTW9kdWxlKHJlc29sdmVBcHAsICdzcmMvaW5kZXgnKSxcbiAgYXBwUGFja2FnZUpzb246IHN0cmluZzsgLy8gcmVzb2x2ZUFwcCgncGFja2FnZS5qc29uJyksXG4gIGFwcFNyYzogc3RyaW5nOyAvLyByZXNvbHZlQXBwKCdzcmMnKSxcbiAgYXBwVHNDb25maWc6IHN0cmluZzsgLy8gcmVzb2x2ZUFwcCgndHNjb25maWcuanNvbicpLFxuICBhcHBKc0NvbmZpZzogc3RyaW5nOyAvLyByZXNvbHZlQXBwKCdqc2NvbmZpZy5qc29uJyksXG4gIHlhcm5Mb2NrRmlsZTogc3RyaW5nOyAvLyByZXNvbHZlQXBwKCd5YXJuLmxvY2snKSxcbiAgdGVzdHNTZXR1cDogc3RyaW5nOyAvLyByZXNvbHZlTW9kdWxlKHJlc29sdmVBcHAsICdzcmMvc2V0dXBUZXN0cycpLFxuICBwcm94eVNldHVwOiBzdHJpbmc7IC8vIHJlc29sdmVBcHAoJ3NyYy9zZXR1cFByb3h5LmpzJyksXG4gIGFwcE5vZGVNb2R1bGVzOiBzdHJpbmc7IC8vIHJlc29sdmVBcHAoJ25vZGVfbW9kdWxlcycpLFxuICBwdWJsaWNVcmw6IHN0cmluZzsgLy8gc3RyaW5nO1xuICBzZXJ2ZWRQYXRoOiBzdHJpbmc7IC8vIGdldFNlcnZlZFBhdGgocmVzb2x2ZUFwcCgncGFja2FnZS5qc29uJykpLFxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBmYWN0b3J5KCkge1xuICBsZXQgY2hhbmdlZFBhdGhzOiBDcmFTY3JpcHRzUGF0aHMgfCB1bmRlZmluZWQ7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBpZiAoY2hhbmdlZFBhdGhzID09IG51bGwpIHtcbiAgICAgIGNoYW5nZWRQYXRocyA9IHBhdGhzO1xuICAgICAgY29uc3QgY21kT3B0aW9uID0gZ2V0Q21kT3B0aW9ucygpO1xuICAgICAgLy8gY29uc29sZS5sb2coJ1tkZWJ1Z10gJywgY21kT3B0aW9uKTtcbiAgICAgIGlmIChjbWRPcHRpb24uYnVpbGRUeXBlID09PSAnbGliJykge1xuICAgICAgICBjb25zdCB7ZGlyfSA9IGZpbmRQYWNrYWdlKGNtZE9wdGlvbi5idWlsZFRhcmdldCk7XG4gICAgICAgIGNoYW5nZWRQYXRocy5hcHBCdWlsZCA9IFBhdGgucmVzb2x2ZShkaXIsICdidWlsZCcpO1xuICAgICAgICBjaGFuZ2VkUGF0aHMuYXBwSW5kZXhKcyA9IFBhdGgucmVzb2x2ZShkaXIsICdwdWJsaWNfYXBpLnRzJyk7XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tY29uc29sZVxuICAgICAgICBjb25zb2xlLmxvZygnW2NyYS1zY3JpcHRzLXBhdGhzXSBjaGFuZ2VkIHJlYWN0LXNjcmlwdHMgcGF0aHM6XFxuJywgY2hhbmdlZFBhdGhzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNoYW5nZWRQYXRocztcbiAgfTtcbn1cbiJdfQ==
